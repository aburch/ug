#!/bin/sh
# ugproject
if test "$1" = "-help"
then
	echo "usage: $0 [options]";
	echo "purpose: compile all ug libraries and applications";
	echo "Options are";
	echo " ug2, ug3, appl2, appl3 "
	exit 1;
fi

if test "x$UGROOT" = "x"
then
	echo "$0: to use $0 set shell environment variable UGROOT!";
	exit 1;
fi

# set -e to stop after the first error; otherwise you may miss errors.
set -e

ug2 () 
{
	ugconf 2
	ugmake ug uglib
	ugmake dom
}

ug3 () 
{
	ugconf 3
	ugmake ug uglib
	ugmake dom
}

appl2 () 
{
	ugmake simple
	ugmake diff2da
	ugmake ns2da 
	ugmake fema 
	ugmake cda 
	ugmake scalar2d
}

appl3 () 
{
	ugmake cda 
	ugmake fema 
	ugmake scalar3d
}

if test "$1" = "ug2"
then
	ug2;
	exit 1;
fi

if test "$1" = "ug3"
then
	ug3;
	exit 1;
fi

if test "$1" = "appl2"
then
	appl2;
	exit 1;
fi

if test "$1" = "appl3"
then
	appl3;
	exit 1;
fi

# default

ugclean all
ugconf save

ugconf 2
ugconf NONETGEN
ug2;
ugmake dev
appl2;

ugconf 3
if test "$1" = "netgen"
then
    ugconf NETGEN
fi
ugmake ug -i ifdef
ugmake cda -i ifdef
ugmake fem -i ifdef
ugmake scalar -i clean
ug3;
appl3;

ugconf restore
ugmake ug -i ifdef

echo "simple, diff2da, ns2da, cd2d, cd3d, fem2d, fem3d, scalar2d, scalar3d created"
