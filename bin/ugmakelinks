#!/bin/sh
if test "$1" = "-help"
then
	echo "purpose: make symbolic links for all header files";
	echo "         used in the application modules";
	exit 1;
fi


# test for /bin/test  :-)
if test -x /bin/test
then
	echo "ugmakelinks will use /bin/test for testing symbolic links"
	TEST_WITH_LINKS=/bin/test
else
	echo "ugmakelinks will use test for testing symbolic links"
	TEST_WITH_LINKS=test
fi


if test "x$UGROOT" = "x"
then
	echo "$0: to use $0 set shell environment variable UGROOT!";
	exit 1;
fi


cd $UGROOT;

if test -d include
then
	rm -f -r include;
fi	
mkdir include;

for i in . * */* */*/* */*/*/* */*/*/*/*
do
	if $TEST_WITH_LINKS  -d $i -a ! -h $i
	then
		if test "$i" != "include" -a `basename $i` != "doc" -a `basename $i` != "CVS"
		then
			echo $i
			cd $i
			for j in *.h
			do
				if test "$j" != "*.h"
				then
					echo $j
					if $TEST_WITH_LINKS  -h $UGROOT/include/$j
					then	
						echo "link for $i/$j already exists";
					else
						ln -s ../$i/$j $UGROOT/include/$j
					fi
				fi
			done
			cd $UGROOT
		fi
	fi
done

exit 0

