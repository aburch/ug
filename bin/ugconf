#!/bin/sh
if test "$1" = "-help"
then
	echo "usage: $0 [<conf>]";
	echo "purpose: copy a config file to ug.conf";
	echo "Options are";
	echo " <conf>: save (copy ug.conf to ug.conf.orig)";
	echo "         restore (copy ug.conf to ug.conf.orig)"; 
	echo "         2 (set DIM = 2)";
	echo "         3 (set DIM = 2)";
	echo "         NETGEN (set NETGEN = ON)";
	echo "         GRAPE (set GRAPE = ON)";
	echo "         NONETGEN (set NETGEN = OFF)";
	echo "         NOGRAPE (set GRAPE = OFF)";
	echo "         HP (set ARCH = HP)";
	echo "         PARAGON (set ARCH = PARAGON)";
	echo "         PC (set ARCH = PC)";
	echo "         POWERGC (set ARCH = POWERGC)";
	echo "         SOLARIS (set ARCH = SOLARIS)";
	echo "         SUN4GCC (set ARCH = SUN4GCC)";
	echo "         T3D (set ARCH = T3D)";
	echo "         SEQ (set MODEL = SEQ)";
	echo "         MPI (set MODEL = MPI)";
	echo "         NX (set MODEL = NX)";
	echo "         NXLIB (set MODEL = NXLIB)";
	echo "         PARIX (set MODEL = PARIX)";
	echo "         PVM (set MODEL = PVM)";
	echo "         SHMEMT3D (set MODEL = SHMEMT3D)";
	echo "         STD_DOMAIN (set DOM_MODUL = STD_DOMAIN)";
	exit 1;
fi

if test "x$UGROOT" = "x"
then
	echo "$0: to use $0 set shell environment variable UGROOT!";
	exit 1;
fi

if test $# -eq 0
then 
	echo "current ug configuration is:";
	egrep '^[ ]*ARCH|^[ ]*MODEL|^[ ]*DIM|^[ ]*GRAPE|^[ ]*NETGEN|^[ ]*DOM_MODULE|^[ ]*DEBUG_MODE' $UGROOT/ug.conf;
	exit 0;
fi

if test "$1" = "save"
then
	if test -d $UGROOT/ug.conf
	then
		cp $UGROOT/ug.conf $UGROOT/ug.conf.orig
	fi				
fi			

if test "$1" = "restore"
then
	if test -r $UGROOT/ug.conf.orig
	then
		mv $UGROOT/ug.conf.orig $UGROOT/ug.conf
	fi				
fi			

if test "$1" = "2"
then
sed 's/^DIM.*$/DIM = 2/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "3"
then
sed 's/^DIM.*$/DIM = 3/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "NETGEN"
then
sed 's/^NETGEN.*$/NETGEN = ON/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
sed 's/^DIM.*$/DIM = 3/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "GRAPE"
then
sed 's/^GRAPE.*$/GRAPE = ON/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "NONETGEN"
then
sed 's/^NETGEN.*$/NETGEN = OFF/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "NOGRAPE"
then
sed 's/^GRAPE.*$/GRAPE = OFF/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "HP"
then
sed 's/^ARCH.*$/ARCH = HP/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "SGI"
then
sed 's/^ARCH.*$/ARCH = SGI/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "AIX"
then
sed 's/^ARCH.*$/ARCH = AIX/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "PARAGON"
then
sed 's/^ARCH.*$/ARCH = PARAGON/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "PC"
then
sed 's/^ARCH.*$/ARCH = PC/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "POWERGC"
then
sed 's/^ARCH.*$/ARCH = POWERGC/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "SOLARIS"
then
sed 's/^ARCH.*$/ARCH = SOLARIS/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "SUN4GCC"
then
sed 's/^ARCH.*$/ARCH = SUN4GCC/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "T3D"
then
sed 's/^ARCH.*$/ARCH = T3D/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "SEQ"
then
sed 's/^MODEL[ \t].*$/MODEL = SEQ/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "MPI"
then
sed 's/^MODEL[ \t].*$/MODEL = MPI/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "NX"
then
sed 's/^MODEL[ \t].*$/MODEL = NX/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "NXLIB"
then
sed 's/^MODEL[ \t].*$/MODEL = NXLIB/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "PARIX"
then
sed 's/^MODEL[ \t].*$/MODEL = PARIX/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "PVM"
then
sed 's/^MODEL[ \t].*$/MODEL = PVM/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "SHMEMT3D"
then
sed 's/^MODEL[ \t].*$/MODEL = SHMEMT3D/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			

if test "$1" = "STD_DOMAIN"
then
sed 's/^DOM_MODULE.*$/DOM_MODULE = STD_DOMAIN/' $UGROOT/ug.conf > $UGROOT/ug.conf.tmp
mv $UGROOT/ug.conf.tmp $UGROOT/ug.conf
fi			
