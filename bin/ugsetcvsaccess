#!/bin/sh 
if test "$1" = "-help"
then
	echo "usage: $0";
	echo "purpose: set the access lists of ug3x module";
	exit 1;
fi

if test "x$UGROOT" = "x"
then
	echo "$0: to use $0 set shell environment variable UGROOT!";
	exit 1;
fi

DEFAULT=ug
DEFAULT_CORE=birken,wieners,stefan,klaus,df,peter,henrik,ug,volker
ERRORFILE=$UGROOT/bin/cvsaccess
#UG=`dirname $UGROOT`
UG=$UGROOT

cd $UGROOT/..
rm -f $ERRORFILE;

# clear access lists 
echo "cvs admin -e `basename $UG` ...";
cvs admin -e `basename $UG` 2>> $ERRORFILE;

# set default access lists 
echo "cvs admin -a$DEFAULT `basename $UG` ...";
cvs admin -a$DEFAULT `basename $UG` 2>> $ERRORFILE;


# set special access lists
cd $UGROOT;
cvs admin -a$DEFAULT_CORE arch 2>> $ERRORFILE;

cd $UGROOT;
cvs admin -e bin 2>> $ERRORFILE;
cvs admin -a$DEFAULT_CORE bin 2>> $ERRORFILE;

cd $UGROOT;
cvs admin -e dev 2>> $ERRORFILE;
cvs admin -a$DEFAULT_CORE dev 2>> $ERRORFILE;

cd $UGROOT;
cvs admin -a$DEFAULT_CORE dom 2>> $ERRORFILE;
cd dom;
cvs admin -e std 2>> $ERRORFILE;
cvs admin -awieners,peter std 2>> $ERRORFILE;
cvs admin -e lgm 2>> $ERRORFILE;
cvs admin -aklaus,df,stefan,ug,christop lgm 2>> $ERRORFILE;
cvs admin -adirk lgm/ansys* 2>> $ERRORFILE;


cd $UGROOT;
cvs admin -awieners,stefan,klaus,df gm 2>> $ERRORFILE;
cvs admin -achristop gm/gg3 2>> $ERRORFILE;

cd $UGROOT;
cvs admin -a$DEFAULT_CORE graphics 2>> $ERRORFILE;

cd $UGROOT;
cvs admin -a$DEFAULT_CORE low 2>> $ERRORFILE;

cd $UGROOT;
cvs admin -awieners,peter,klaus,df np 2>> $ERRORFILE;
cvs admin -astefan np/procs/bdf.c np/procs/error.c 2>> $ERRORFILE;

cd $UGROOT;
cvs admin -e parallel 2>> $ERRORFILE;
cvs admin -abirken,stefan,ug parallel 2>> $ERRORFILE;
cd parallel;
cvs admin -abirken,ug ddd dddobj 2>> $ERRORFILE;
cvs admin -astefan,ug chaco 2>> $ERRORFILE;
cvs admin -abirken,stefan,ug ppif 2>> $ERRORFILE;
cvs admin -abirken,stefan,ug,wieners dddif 2>> $ERRORFILE;

cd $UGROOT;
cvs admin -a$DEFAULT_CORE ui 2>> $ERRORFILE;

if test `grep failed $ERRORFILE | wc -l` -ge 1
then 
	echo "";
	echo "ERROR REPORT:";
	grep failed $ERRORFILE;
	echo "";
	echo "access to above files of repository failed";
	echo "not all access lists could be set properly";
	echo "Check for errors in file: $ERRORFILE!";
else
#	rm -f $ERRORFILE;
	echo "$0 succeded, all access lists are set properly!";
fi

exit 0;
